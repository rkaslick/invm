(this.webpackJsonpInvmogul=this.webpackJsonpInvmogul||[]).push([[44],{1046:function(t,e,n){"use strict";n.r(e);var s=n(18),a=n(17),c=n(9),i=(n(1254),n(371)),r=n(1218),o=n(1214),l=n(15),d=n(0),u=n(72),j=n(141),b=(n(374),n(233)),h=n(105),p=n(77),f=n(57),g=n(43),O=n(62),x=n(194),S=n(1274),D=n(125),m=n(285),L=n.n(m),T=n(2),P=["classes"],y={fetchAllProducts:h.d,fetchAllNSTransactions:p.e,fetchAllTCTransactions:g.e,fetchAllCSTransactions:f.e,fetchAllTransactionDetails:p.d,fetchAllCSTransactionDetails:f.d,fetchAllTCTransactionDetails:g.d,fetchAllExpenses:x.d,fetchAllCompanyData:D.d},C=Object(u.b)((function(t){return{productsList:t.products.list,creditSalesList:t.creditSale.list,tcTransactionsList:t.trucks_cadetes.list,nSTransactionDeatail:t.cash.list,salesList:t.cashSale.list,cSaleDetailsList:t.credit.list,tcTransDetailsList:t.trucks.list,expensesList:t.expenses.list,companyDataList:t.companyData.list}}),y)(Object(l.a)((function(t){return{root:{"& .MuiTableCell-head":{fontSize:"0.95rem"}},paper:{margin:t.spacing(-8.9),padding:t.spacing(6)},grid:{paddingLeft:t.spacing(2)},td:{textIndent:"50px"},tr:{backgroundColor:"primary",color:"white"}}}))((function(t){var e=t.classes,n=Object(c.a)(t,P);console.log(n.nSaleList);var s=n.nSaleList.reduce((function(t,e){return t+e.totalPrice}),0),a=(n.nSaleList.reduce((function(t,e){return t+e.deposit}),0),n.nSaleList.reduce((function(t,e){return t+e.total}),0)),i=n.nSaleList.reduce((function(t,e){return t+e.quantity}),0),r=Object(d.useRef)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(L.a,{trigger:function(){return Object(T.jsx)(O.a.Button,{text:"Print",variant:"outlined",className:e.newButton})},content:function(){return r.current}}),Object(T.jsx)("div",{children:Object(T.jsxs)("div",{ref:r,className:"p-5",children:[Object(T.jsxs)("header",{children:[Object(T.jsxs)("div",{className:"logo",children:[Object(T.jsx)("img",{src:n.companyDataList[0].logo,alt:"generic business logo",height:100,width:100,style:{marginTop:50}}),Object(T.jsx)("h5",{children:n.companyDataList[0].name})]}),Object(T.jsxs)("div",{className:"invoiceNbr",children:["ALL WALK IN SALES REPORT",Object(T.jsx)("br",{}),Object(T.jsxs)("h5",{children:[" For the period: ",n.dateR]})]})]}),Object(T.jsx)("section",{children:Object(T.jsxs)("table",{class:"table  .table-responsive{-sm|-md|-lg|-xl|-xxl} table-bordered table-hover table-sm table-striped",children:[Object(T.jsx)("thead",{class:"table-dark",children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{scope:"col",children:"Product Name"}),Object(T.jsx)("th",{scope:"col",children:"Quantity"}),Object(T.jsx)("th",{scope:"col",children:"Unit Price"}),Object(T.jsx)("th",{scope:"col",children:"Total Price"}),Object(T.jsx)("th",{scope:"col",children:"Total"})]})}),Object(T.jsxs)("tbody",{children:[n.nSaleList.map((function(t,n){return Object(T.jsxs)("tr",{hover:!0,children:[Object(T.jsx)("td",{className:e.td,children:t.prodName}),Object(T.jsx)("td",{children:t.quantity}),Object(T.jsx)("td",{children:t.unitPrice}),Object(T.jsx)("td",{children:t.totalPrice}),Object(T.jsx)("td",{children:t.total})]},n)})),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{}),Object(T.jsx)("td",{className:e.td}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"Totals"}),Object(T.jsx)("td",{children:i}),Object(T.jsx)("td",{}),Object(T.jsx)("td",{children:s}),Object(T.jsx)("td",{children:a})]})]})]})})]})})]})}))),A=["classes"],v={fetchAllProducts:h.d,fetchAllNSTransactions:p.e,fetchAllTCTransactions:g.e,fetchAllCSTransactions:f.e,fetchAllTransactionDetails:p.d,fetchAllCSTransactionDetails:f.d,fetchAllTCTransactionDetails:g.d,fetchAllExpenses:x.d,fetchAllCompanyData:D.d};e.default=Object(u.b)((function(t){return{productsList:t.products.list,creditSalesList:t.creditSale.list,tcTransactionsList:t.trucks_cadetes.list,nSTransactionDetail:t.cash.list,salesList:t.cashSale.list,cSaleDetailsList:t.credit.list,tcTransDetailsList:t.trucks.list,expensesList:t.expenses.list,companyDataList:t.companyData.list}}),v)(Object(l.a)((function(t){return{root:{"& .MuiTableCell-head":{fontSize:"0.95rem"}},paper:{margin:t.spacing(-8.9),padding:t.spacing(6)},grid:{paddingLeft:t.spacing(2)},td:{textIndent:"50px"},tr:{backgroundColor:"primary",color:"white"}}}))((function(t){var e=t.classes,n=Object(c.a)(t,A),l=(Object(j.useToasts)().addToast,Object(d.useState)(0)),u=Object(a.a)(l,2),h=u[0],p=u[1],f=Object(d.useState)(!1),g=Object(a.a)(f,2),x=g[0],D=g[1],L=Object(d.useState)([{}]),P=Object(a.a)(L,2),y=P[0],v=P[1],N=Object(d.useState)([]),w=Object(a.a)(N,2),I=(w[0],w[1]),E=Object(d.useState)([]),q=Object(a.a)(E,2),k=q[0],M=q[1],R=Object(d.useState)(null),F=Object(a.a)(R,2),Y=F[0],B=F[1],z=Object(d.useState)(""),J=Object(a.a)(z,2),_=J[0],G=J[1],K=Object(d.useState)(!1),Q=Object(a.a)(K,2),U=Q[0],W=Q[1],H=Object(d.useRef)(),V=Object(d.useState)([]),X=Object(a.a)(V,2),Z=X[0],$=X[1],tt=Object(d.useState)([{}]),et=Object(a.a)(tt,2),nt=et[0],st=et[1],at=Object(d.useState)([{}]),ct=Object(a.a)(at,2),it=ct[0],rt=ct[1],ot="",lt=new Date,dt=String(lt.getDate()).padStart(2,"0"),ut=String(lt.getMonth()+1).padStart(2,"0"),jt=lt.getFullYear();lt=jt+"-"+ut+"-"+dt,Object(d.useEffect)((function(){n.fetchAllProducts(),n.fetchAllNSTransactions(),n.fetchAllTCTransactions(),n.fetchAllCSTransactions(),n.fetchAllTransactionDetails(),n.fetchAllCSTransactionDetails(),n.fetchAllTCTransactionDetails(),n.fetchAllExpenses(),n.fetchAllCompanyData()}),[]);new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),dt)),new Date(new Date((new Date).getFullYear(),(new Date).getMonth()+1,dt)),new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),8));var bt=new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),dt));Object(m.useReactToPrint)({content:function(){return H.current}});return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(i.a,{className:e.paper,elevation:3,children:Object(T.jsxs)(r.a,{container:!0,children:[Object(T.jsxs)(r.a,{item:!0,xs:12,children:[Object(T.jsxs)(o.a,{children:[Object(T.jsx)(S.a,{placeholder:"Enter Date Range",max:bt,format:"yyyy-MM-dd",start:"Year",date:"Year",change:function(t){ot=t.text,B(ot)}}),Object(T.jsx)(O.a.Button,{text:"Load ",variant:"outlined",className:e.newButton,onClick:function(){!function(){try{var t=n.salesList.filter((function(t){return t.dateIn.toString().substring(0,10)>=Y.toString().substring(0,10)&&t.dateIn.toString().substring(0,10)<=Y.toString().substring(13,23)})),e="",a=[],c=[];t.forEach((function(t){e=t.transCode,n.nSTransactionDetail.filter((function(t){return t.transCode==e})).forEach((function(i){var r=i.productId,o=n.productsList.find((function(t){return t.productId==r})),l={transCode:e,productId:o.productId,prodName:o.name,quantity:i.quantity,unitPrice:o.sellingPrice,totalPrice:i.totalPrice,deposit:i.deposit,total:i.total,date:t.dateIn.toString().substring(0,10)};c=[].concat(Object(s.a)(a),[l]),a=c}))}));var i=[];c.forEach((function(t){this[t.prodName]||this[t.date]||(this[t.prodName]={date:t.date,prodName:t.prodName,quantity:0,unitPrice:t.unitPrice,totalPrice:0,deposit:0,total:0},i.push(this[t.prodName])),this[t.prodName].quantity+=t.quantity,this[t.prodName].totalPrice+=t.totalPrice,this[t.prodName].deposit+=t.deposit,this[t.prodName].total+=t.total}),Object.create(null)),console.log(i),$(i),I(0);var r=t.reduce((function(t,e){return t+e.totalPrice}),0),o=t.reduce((function(t,e){return t+e.gDeposit}),0),l=n.creditSalesList.filter((function(t){return t.datePaid.toString().substring(0,10)>=Y.toString().substring(0,10)&&t.datePaid.toString().substring(0,10)<=Y.toString().substring(13,23)})),d="";l.forEach((function(t){d=t.transCode,n.cSaleDetailsList.filter((function(t){return t.transCode==d})).forEach((function(t){var e=t.productId,a=n.productsList.find((function(t){return t.productId==e})),c={quantity:t.quantity,unitPrice:a.sellingPrice,totalPrice:t.totalPrice,deposit:t.deposit,total:t.total},i=[].concat(Object(s.a)(nt),[c]);st(i)}))}));var u=l.reduce((function(t,e){return t+e.totalPrice}),0),j=l.reduce((function(t,e){return t+e.gDeposit}),0),b=n.tcTransactionsList.filter((function(t){return t.returnDate.toString().substring(0,10)>=Y.toString().substring(0,10)&&t.returnDate.toString().substring(0,10)<=Y.toString().substring(13,23)})),h="";b.forEach((function(t){h=t.transCode,n.tcTransDetailsList.filter((function(t){return t.transCode==h})).forEach((function(t){var e=t.productId,a=n.productsList.find((function(t){return t.productId==e})),c={quantity:t.quantity,unitPrice:a.sellingPrice,totalPrice:t.totalPrice,deposit:t.deposit,total:t.total},i=[].concat(Object(s.a)(it),[c]);rt(i)}))}));var p=b.reduce((function(t,e){return t+e.totalPrice}),0),f=b.reduce((function(t,e){return t+e.gDeposit}),0),g=r+u+p,O=o+j+f,x=g,S=x-0,D=n.expensesList.filter((function(t){return t.date.toString().substring(0,10)>=Y.toString().substring(0,10)&&t.date.toString().substring(0,10)<=Y.toString().substring(13,23)})).reduce((function(t,e){return t+e.amount}),0);v([{Sales:g,Cost:0,GrossProfit:S,Expenses:D,NetProfit:S-D,Deposits:O,TotalIncome:x}]);var m=n.expensesList.filter((function(t){return t.date.toString().substring(0,10)>=Y.toString().substring(0,10)&&t.date.toString().substring(0,10)<=Y.toString().substring(13,23)}));M(m),G(n.companyDataList)}catch(L){console.log(L)}}(),W(!0)}})]}),Object(T.jsx)(o.a,{})]}),Object(T.jsx)(r.a,{}),Object(T.jsx)(r.a,{item:!0,xs:12,children:Object(T.jsx)("div",{children:!0===U&&Object(T.jsx)(C,{currentId:h,setCurrentId:p,plList:y,setPlList:v,expD:k,setExpD:M,dateR:Y,setDateR:B,compD:_,setCompD:G,nSaleList:Z,setNSaleList:$,cSaleList:nt,setCSaleList:st,cTSales:it,setCTSales:rt})})})]})}),Object(T.jsx)(b.a,{title:"Are you sure you want to delete this record?",subTitle:"This operation can't be reversed",confirmDialog:x,setConfirmDialog:D})]})})))},1254:function(t,e,n){}}]);
//# sourceMappingURL=44.82a1d9b2.chunk.js.map