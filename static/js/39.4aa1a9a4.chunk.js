(this.webpackJsonpInvmogul=this.webpackJsonpInvmogul||[]).push([[39],{1049:function(t,e,s){"use strict";s.r(e);var a=s(18),c=s(17),n=s(9),i=(s(1257),s(371)),r=s(1218),l=s(1214),o=s(15),d=s(0),u=s(72),j=s(141),h=(s(374),s(233)),b=s(105),p=s(77),O=s(57),m=s(43),f=s(62),x=s(194),g=s(1274),D=s(125),S=s(7),T=s(285),N=s.n(T),y=s(2),L=["classes"],C={fetchAllProducts:b.d,fetchAllNSTransactions:p.e,fetchAllTCTransactions:m.e,fetchAllCSTransactions:O.e,fetchAllTransactionDetails:p.d,fetchAllCSTransactionDetails:O.d,fetchAllTCTransactionDetails:m.d,fetchAllExpenses:x.d,fetchAllCompanyData:D.d},A=Object(u.b)((function(t){return{productsList:t.products.list,creditSalesList:t.creditSale.list,tcTransactionsList:t.trucks_cadetes.list,nSTransactionDeatail:t.cash.list,salesList:t.cashSale.list,cSaleDetailsList:t.credit.list,tcTransDetailsList:t.trucks.list,expensesList:t.expenses.list,companyDataList:t.companyData.list}}),C)(Object(o.a)((function(t){return{root:{"& .MuiTableCell-head":{fontSize:"0.95rem"}},paper:{margin:t.spacing(-8.9),padding:t.spacing(6)},grid:{paddingLeft:t.spacing(2)},td:{textIndent:"50px"},tr:{backgroundColor:"primary",color:"white"},t:{width:"200px"}}}))((function(t){var e=t.classes,s=Object(n.a)(t,L);var a,c,i=(a=s.cSaleList,c="customer",a.reduce((function(t,e){return void 0===e[c]?t:Object.assign(t,Object(S.a)({},e[c],(t[e[c]]||[]).concat(e)))}),{})),r=0,l=0,o=0,u=[];var j=Object(d.useRef)();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(N.a,{trigger:function(){return Object(y.jsx)(f.a.Button,{text:"Print",variant:"outlined",className:e.newButton})},content:function(){return j.current}}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{ref:j,className:"p-5",children:[Object(y.jsxs)("header",{children:[Object(y.jsxs)("div",{className:"logo",children:[Object(y.jsx)("img",{src:s.companyDataList[0].logo,alt:"generic business logo",height:100,width:100,style:{marginTop:50}}),Object(y.jsx)("h5",{children:s.companyDataList[0].name})]}),Object(y.jsxs)("div",{className:"invoiceNbr",children:["CREDIT SALE BY CUSTOMER REPORT",Object(y.jsx)("br",{}),Object(y.jsxs)("h5",{children:[" For the period: ",s.dateR]})]})]}),Object(y.jsx)("section",{children:Object(y.jsxs)("table",{class:"table  .table-responsive{-sm|-md|-lg|-xl|-xxl} table-bordered table-hover table-sm table-striped",children:[Object(y.jsx)("thead",{class:"table-dark",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:e.t,children:"Customer"}),Object(y.jsx)("th",{scope:"col",children:"Product Details"})]})}),Object(y.jsx)("tbody",{children:Object.keys(i).map((function(t,s){return Object(y.jsxs)("tr",{hover:!0,children:[Object(y.jsx)("td",{className:e.td,children:t}),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{className:e.t,children:"Name"}),Object(y.jsx)("th",{className:e.t,children:"Quantity"}),Object(y.jsx)("th",{className:e.t,children:"Unit Price"}),Object(y.jsx)("th",{className:e.t,children:"Total Price"}),Object(y.jsx)("th",{className:e.t,children:"Total"}),Object(y.jsxs)("th",{children:[" ",(a=i[t],a.forEach((function(t){this[t.prodName]||this[t.customer]||(this[t.prodName]={date:t.date,prodName:t.prodName,quantity:0,unitPrice:t.unitPrice,totalPrice:0,deposit:0,total:0,customer:t.customer},u.push(this[t.prodName])),this[t.prodName].quantity+=t.quantity,this[t.prodName].totalPrice+=t.totalPrice,this[t.prodName].deposit+=t.deposit,this[t.prodName].total+=t.total}),Object.create(null)),r=u.reduce((function(t,e){return t+e.totalPrice}),0),u.reduce((function(t,e){return t+e.deposit}),0),l=u.reduce((function(t,e){return t+e.total}),0),void(o=u.reduce((function(t,e){return t+e.quantity}),0)))]})]}),u.map((function(t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:e.t,children:t.prodName}),Object(y.jsx)("td",{className:e.t,children:t.quantity}),Object(y.jsx)("td",{className:e.t,children:t.unitPrice}),Object(y.jsx)("td",{className:e.t,children:t.totalPrice}),Object(y.jsx)("td",{className:e.t,children:t.total})]})})),Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Total"}),Object(y.jsx)("td",{children:o}),Object(y.jsx)("td",{}),Object(y.jsx)("td",{children:r}),Object(y.jsx)("td",{children:l}),Object(y.jsx)("td",{children:void(u=[])})]})]},s);var a}))})]})})]})})]})}))),v=s(146),P=["classes"],w={fetchAllProducts:b.d,fetchAllNSTransactions:p.e,fetchAllTCTransactions:m.e,fetchAllCSTransactions:O.e,fetchAllTransactionDetails:p.d,fetchAllCSTransactionDetails:O.d,fetchAllTCTransactionDetails:m.d,fetchAllExpenses:x.d,fetchAllCompanyData:D.d,fetchAllCustomers:v.d};e.default=Object(u.b)((function(t){return{productsList:t.products.list,creditSalesList:t.creditSale.list,tcTransactionsList:t.trucks_cadetes.list,nSTransactionDetail:t.cash.list,salesList:t.cashSale.list,cSaleDetailsList:t.credit.list,tcTransDetailsList:t.trucks.list,expensesList:t.expenses.list,companyDataList:t.companyData.list,customersList:t.customers.list}}),w)(Object(o.a)((function(t){return{root:{"& .MuiTableCell-head":{fontSize:"0.95rem"}},paper:{margin:t.spacing(-8.9),padding:t.spacing(6)},grid:{paddingLeft:t.spacing(2)},td:{textIndent:"50px"},tr:{backgroundColor:"primary",color:"white"}}}))((function(t){var e=t.classes,s=Object(n.a)(t,P),o=(Object(j.useToasts)().addToast,Object(d.useState)(0)),u=Object(c.a)(o,2),b=u[0],p=u[1],O=Object(d.useState)(!1),m=Object(c.a)(O,2),x=m[0],D=m[1],S=Object(d.useState)([{}]),N=Object(c.a)(S,2),L=N[0],C=N[1],v=Object(d.useState)([]),w=Object(c.a)(v,2),I=(w[0],w[1],Object(d.useState)([])),E=Object(c.a)(I,2),k=E[0],q=E[1],R=Object(d.useState)(null),M=Object(c.a)(R,2),F=M[0],Y=M[1],B=Object(d.useState)(""),z=Object(c.a)(B,2),J=z[0],U=z[1],_=Object(d.useState)(!1),Q=Object(c.a)(_,2),G=Q[0],H=Q[1],K=Object(d.useRef)(),V=Object(d.useState)([]),W=Object(c.a)(V,2),X=W[0],Z=W[1],$=Object(d.useState)([{}]),tt=Object(c.a)($,2),et=tt[0],st=tt[1],at=Object(d.useState)([{}]),ct=Object(c.a)(at,2),nt=ct[0],it=ct[1],rt="",lt=new Date,ot=String(lt.getDate()).padStart(2,"0"),dt=String(lt.getMonth()+1).padStart(2,"0"),ut=lt.getFullYear();lt=ut+"-"+dt+"-"+ot,Object(d.useEffect)((function(){s.fetchAllProducts(),s.fetchAllNSTransactions(),s.fetchAllTCTransactions(),s.fetchAllCSTransactions(),s.fetchAllTransactionDetails(),s.fetchAllCSTransactionDetails(),s.fetchAllTCTransactionDetails(),s.fetchAllExpenses(),s.fetchAllCompanyData(),s.fetchAllCustomers()}),[]);new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),ot)),new Date(new Date((new Date).getFullYear(),(new Date).getMonth()+1,ot)),new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),8));var jt=new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),ot));Object(T.useReactToPrint)({content:function(){return K.current}});return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(i.a,{className:e.paper,elevation:3,children:Object(y.jsxs)(r.a,{container:!0,children:[Object(y.jsxs)(r.a,{item:!0,xs:12,children:[Object(y.jsxs)(l.a,{children:[Object(y.jsx)(g.a,{placeholder:"Enter Date Range",max:jt,format:"yyyy-MM-dd",start:"Year",date:"Year",change:function(t){rt=t.text,Y(rt)}}),Object(y.jsx)(f.a.Button,{text:"Load ",variant:"outlined",className:e.newButton,onClick:function(){!function(){try{var t=s.creditSalesList.filter((function(t){return t.dateIn.toString().substring(0,10)>=F.toString().substring(0,10)&&t.dateIn.toString().substring(0,10)<=F.toString().substring(13,23)&&"0001-01-01T00:00:00"==t.datePaid.toString()})),e="",c=[],n=[];t.forEach((function(t){e=t.transCode;var i=s.cSaleDetailsList.filter((function(t){return t.transCode==e})),r=s.customersList.find((function(e){return e.id==t.customerId}));i.forEach((function(e){var i=e.productId,l=s.productsList.find((function(t){return t.productId==i}));l.buyingPrice,e.quantity;var o={customer:r.name,productId:l.productId,prodName:l.name,quantity:e.quantity,unitPrice:l.sellingPrice,totalPrice:e.totalPrice,deposit:e.deposit,total:e.total,date:t.dateIn};n=[].concat(Object(a.a)(c),[o]),c=n}))}));var i=[];n.forEach((function(t){this[t.prodName]||this[t.customer]||(this[t.customer]={date:t.date,prodName:t.prodName,quantity:0,unitPrice:t.unitPrice,totalPrice:0,deposit:0,total:0,customer:t.customer},i.push(this[t.customer])),this[t.customer].quantity+=t.quantity,this[t.customer].totalPrice+=t.totalPrice,this[t.customer].deposit+=t.deposit,this[t.customer].total+=t.total}),Object.create(null)),st(n),U(s.companyDataList)}catch(r){console.log(r.message)}}(),H(!0)}})]}),Object(y.jsx)(l.a,{})]}),Object(y.jsx)(r.a,{}),Object(y.jsx)(r.a,{item:!0,xs:12,children:Object(y.jsx)("div",{children:!0===G&&Object(y.jsx)(A,{currentId:b,setCurrentId:p,plList:L,setPlList:C,expD:k,setExpD:q,dateR:F,setDateR:Y,compD:J,setCompD:U,nSaleList:X,setNSaleList:Z,cSaleList:et,setCSaleList:st,cTSales:nt,setCTSales:it})})})]})}),Object(y.jsx)(h.a,{title:"Are you sure you want to delete this record?",subTitle:"This operation can't be reversed",confirmDialog:x,setConfirmDialog:D})]})})))},1257:function(t,e,s){}}]);
//# sourceMappingURL=39.4aa1a9a4.chunk.js.map