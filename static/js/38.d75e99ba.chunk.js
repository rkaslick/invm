(this.webpackJsonpInvmogul=this.webpackJsonpInvmogul||[]).push([[38],{1051:function(t,e,a){"use strict";a.r(e);var s=a(18),c=a(17),n=a(9),i=(a(1259),a(371)),r=a(1218),l=a(1214),d=a(15),o=a(0),j=a(72),u=a(141),h=(a(374),a(233)),b=a(105),O=a(77),p=a(57),f=a(43),x=a(62),m=a(194),D=a(1274),S=a(125),g=a(7),T=a(285),N=a.n(T),A=a(2),L=["classes"],C={fetchAllProducts:b.d,fetchAllNSTransactions:O.e,fetchAllTCTransactions:f.e,fetchAllCSTransactions:p.e,fetchAllTransactionDetails:O.d,fetchAllCSTransactionDetails:p.d,fetchAllTCTransactionDetails:f.d,fetchAllExpenses:m.d,fetchAllCompanyData:S.d},y=Object(j.b)((function(t){return{productsList:t.products.list,creditSalesList:t.creditSale.list,tcTransactionsList:t.trucks_cadetes.list,nSTransactionDeatail:t.cash.list,salesList:t.cashSale.list,cSaleDetailsList:t.credit.list,tcTransDetailsList:t.trucks.list,expensesList:t.expenses.list,companyDataList:t.companyData.list}}),C)(Object(d.a)((function(t){return{root:{"& .MuiTableCell-head":{fontSize:"0.95rem"}},paper:{margin:t.spacing(-8.9),padding:t.spacing(6)},grid:{paddingLeft:t.spacing(2)},td:{textIndent:"50px"},tr:{backgroundColor:"primary",color:"white"},t:{width:"200px"}}}))((function(t){var e=t.classes,a=Object(n.a)(t,L);var s,c,i=(s=a.cTSales,c="cadete",s.reduce((function(t,e){return void 0===e[c]?t:Object.assign(t,Object(g.a)({},e[c],(t[e[c]]||[]).concat(e)))}),{})),r=0,l=0,d=0,j=0,u=[];var h=Object(o.useRef)();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(N.a,{trigger:function(){return Object(A.jsx)(x.a.Button,{text:"Print",variant:"outlined",className:e.newButton})},content:function(){return h.current}}),Object(A.jsx)("div",{children:Object(A.jsxs)("div",{ref:h,className:"p-5",children:[Object(A.jsxs)("header",{children:[Object(A.jsx)("div",{className:"logo",children:Object(A.jsx)("h5",{children:"Jamumbi Enterprises"})}),Object(A.jsxs)("div",{className:"invoiceNbr",children:["CADETE SALES REPORT",Object(A.jsx)("br",{}),Object(A.jsxs)("h5",{children:[" For the period: ",a.dateR]})]})]}),Object(A.jsx)("section",{children:Object(A.jsxs)("table",{class:"table  .table-responsive{-sm|-md|-lg|-xl|-xxl} table-bordered table-hover table-sm table-striped",children:[Object(A.jsx)("thead",{class:"table-dark",children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"col",className:e.t,children:"Cadete"}),Object(A.jsx)("th",{scope:"col",children:"Product Details"})]})}),Object(A.jsx)("tbody",{children:Object.keys(i).map((function(t,a){return Object(A.jsxs)("tr",{hover:!0,children:[Object(A.jsx)("td",{className:e.td,children:t}),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{className:e.t,children:"Name"}),Object(A.jsx)("th",{className:e.t,children:"Quantity"}),Object(A.jsx)("th",{className:e.t,children:"Unit Price"}),Object(A.jsx)("th",{className:e.t,children:"Total Price"}),Object(A.jsx)("th",{className:e.t,children:"Deposit"}),Object(A.jsx)("th",{className:e.t,children:"Total"}),Object(A.jsxs)("th",{children:[" ",(s=i[t],s.forEach((function(t){this[t.prodName]||this[t.cadete]||(this[t.prodName]={date:t.date,prodName:t.prodName,quantity:0,unitPrice:t.unitPrice,totalPrice:0,deposit:0,total:0,cadete:t.cadete},u.push(this[t.prodName])),this[t.prodName].quantity+=t.quantity,this[t.prodName].totalPrice+=t.totalPrice,this[t.prodName].deposit+=t.deposit,this[t.prodName].total+=t.total}),Object.create(null)),r=u.reduce((function(t,e){return t+e.totalPrice}),0),l=u.reduce((function(t,e){return t+e.deposit}),0),d=u.reduce((function(t,e){return t+e.total}),0),void(j=u.reduce((function(t,e){return t+e.quantity}),0)))]})]}),u.map((function(t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{className:e.t,children:t.prodName}),Object(A.jsx)("td",{className:e.t,children:t.quantity}),Object(A.jsx)("td",{className:e.t,children:t.unitPrice}),Object(A.jsx)("td",{className:e.t,children:t.totalPrice}),Object(A.jsx)("td",{className:e.t,children:t.deposit}),Object(A.jsx)("td",{className:e.t,children:t.total})]})})),Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Total"}),Object(A.jsx)("td",{children:j}),Object(A.jsx)("td",{}),Object(A.jsx)("td",{children:r}),Object(A.jsx)("td",{children:l}),Object(A.jsx)("td",{children:d}),Object(A.jsx)("td",{children:void(u=[])})]})]},a);var s}))})]})})]})})]})}))),v=a(146),P=a(112),w=["classes"],E={fetchAllProducts:b.d,fetchAllNSTransactions:O.e,fetchAllTCTransactions:f.e,fetchAllCSTransactions:p.e,fetchAllTransactionDetails:O.d,fetchAllCSTransactionDetails:p.d,fetchAllTCTransactionDetails:f.d,fetchAllExpenses:m.d,fetchAllCompanyData:S.d,fetchAllCustomers:v.d,fetchAllAddStaff:P.d};e.default=Object(j.b)((function(t){return{productsList:t.products.list,creditSalesList:t.creditSale.list,tcTransactionsList:t.trucks_cadetes.list,nSTransactionDetail:t.cash.list,salesList:t.cashSale.list,cSaleDetailsList:t.credit.list,tcTransDetailsList:t.trucks.list,expensesList:t.expenses.list,companyDataList:t.companyData.list,customersList:t.customers.list,addStaffList:t.addStaff.list}}),E)(Object(d.a)((function(t){return{root:{"& .MuiTableCell-head":{fontSize:"0.95rem"}},paper:{margin:t.spacing(-8.9),padding:t.spacing(6)},grid:{paddingLeft:t.spacing(2)},td:{textIndent:"50px"},tr:{backgroundColor:"primary",color:"white"}}}))((function(t){var e=t.classes,a=Object(n.a)(t,w),d=(Object(u.useToasts)().addToast,Object(o.useState)(0)),j=Object(c.a)(d,2),b=j[0],O=j[1],p=Object(o.useState)(!1),f=Object(c.a)(p,2),m=f[0],S=f[1],g=Object(o.useState)([{}]),N=Object(c.a)(g,2),L=N[0],C=N[1],v=Object(o.useState)([]),P=Object(c.a)(v,2),E=(P[0],P[1],Object(o.useState)([])),I=Object(c.a)(E,2),k=I[0],q=I[1],M=Object(o.useState)(null),R=Object(c.a)(M,2),F=R[0],Y=R[1],B=Object(o.useState)(""),J=Object(c.a)(B,2),z=J[0],_=J[1],Q=Object(o.useState)(!1),U=Object(c.a)(Q,2),G=U[0],H=U[1],K=Object(o.useRef)(),V=Object(o.useState)([]),W=Object(c.a)(V,2),X=W[0],Z=W[1],$=Object(o.useState)([{}]),tt=Object(c.a)($,2),et=tt[0],at=tt[1],st=Object(o.useState)([{}]),ct=Object(c.a)(st,2),nt=ct[0],it=ct[1],rt="",lt=new Date,dt=String(lt.getDate()).padStart(2,"0"),ot=String(lt.getMonth()+1).padStart(2,"0"),jt=lt.getFullYear();lt=jt+"-"+ot+"-"+dt;var ut=new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),dt)),ht=new Date(new Date((new Date).getFullYear(),(new Date).getMonth()+1,dt)),bt=(new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),8)),new Date(new Date((new Date).getFullYear(),(new Date).getMonth(),dt)));Object(o.useEffect)((function(){a.fetchAllProducts(),a.fetchAllNSTransactions(),a.fetchAllTCTransactions(),a.fetchAllCSTransactions(),a.fetchAllTransactionDetails(),a.fetchAllCSTransactionDetails(),a.fetchAllTCTransactionDetails(),a.fetchAllExpenses(),a.fetchAllCompanyData(),a.fetchAllCustomers(),a.fetchAllAddStaff()}),[]);Object(T.useReactToPrint)({content:function(){return K.current}});return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(i.a,{className:e.paper,elevation:3,children:Object(A.jsxs)(r.a,{container:!0,children:[Object(A.jsxs)(r.a,{item:!0,xs:12,children:[Object(A.jsxs)(l.a,{children:[Object(A.jsx)(D.a,{placeholder:"Enter Date Range",startDate:ut,endDate:ht,max:bt,format:"yyyy-MM-dd",start:"Year",date:"Year",change:function(t){rt=t.text,Y(rt)}}),Object(A.jsx)(x.a.Button,{text:"Load ",variant:"outlined",className:e.newButton,onClick:function(){!function(){try{var t=a.tcTransactionsList.filter((function(t){return t.returnDate.toString().substring(0,10)>=F.toString().substring(0,10)&&t.returnDate.toString().substring(0,10)<=F.toString().substring(13,23)})),e="",c=[],n=[];t.forEach((function(t){e=t.transCode;var i=a.tcTransDetailsList.filter((function(t){return t.transCode==e})),r=a.addStaffList.find((function(e){return e.id==t.cadeteId}));i.forEach((function(e){var i=e.productId,l=a.productsList.find((function(t){return t.productId==i})),d={cadete:r.fName+" "+r.sName,productId:l.productId,prodName:l.name,quantity:e.quantity,unitPrice:l.sellingPrice,totalPrice:e.totalPrice,deposit:e.deposit,total:e.total,date:t.dateIn};n=[].concat(Object(s.a)(c),[d]),c=n}))}));var i=[];n.forEach((function(t){this[t.prodName]||this[t.cadete]||(this[t.cadete]={date:t.date,prodName:t.prodName,quantity:0,unitPrice:t.unitPrice,totalPrice:0,deposit:0,total:0,cadete:t.cadete},i.push(this[t.cadete])),this[t.cadete].quantity+=t.quantity,this[t.cadete].totalPrice+=t.totalPrice,this[t.cadete].deposit+=t.deposit,this[t.cadete].total+=t.total}),Object.create(null)),it(n),_(a.companyDataList)}catch(r){console.log(r.message)}}(),H(!0)}})]}),Object(A.jsx)(l.a,{})]}),Object(A.jsx)(r.a,{}),Object(A.jsx)(r.a,{item:!0,xs:12,children:Object(A.jsx)("div",{children:!0===G&&Object(A.jsx)(y,{currentId:b,setCurrentId:O,plList:L,setPlList:C,expD:k,setExpD:q,dateR:F,setDateR:Y,compD:z,setCompD:_,nSaleList:X,setNSaleList:Z,cSaleList:et,setCSaleList:at,cTSales:nt,setCTSales:it})})})]})}),Object(A.jsx)(h.a,{title:"Are you sure you want to delete this record?",subTitle:"This operation can't be reversed",confirmDialog:m,setConfirmDialog:S})]})})))},1259:function(t,e,a){}}]);
//# sourceMappingURL=38.d75e99ba.chunk.js.map